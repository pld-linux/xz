--- xz-5.1.1alpha/src/xz/xz.1~	2011-04-12 12:42:58.000000000 +0200
+++ xz-5.1.1alpha/src/xz/xz.1	2011-10-22 23:07:14.357449738 +0200
@@ -913,7 +913,7 @@
 .B 0
 makes
 .B xz
-use as many threads as there are CPU cores on the system.
+use as many threads as there are CPU cores on the system (default).
 The actual number of threads can be less than
 .I threads
 if the input file is not big enough
--- xz-5.1.1alpha/src/xz/args.c~	2011-04-12 12:42:58.000000000 +0200
+++ xz-5.1.1alpha/src/xz/args.c	2011-10-22 23:12:48.269025567 +0200
@@ -144,6 +144,8 @@
 
 	int c;
 
+	hardware_threads_set(0);
+
 	while ((c = getopt_long(argc, argv, short_opts, long_opts, NULL))
 			!= -1) {
 		switch (c) {
--- xz/src/xz/hardware.c~	2011-04-12 12:42:58.000000000 +0200
+++ xz/src/xz/hardware.c	2011-10-22 23:22:28.306650949 +0200
@@ -139,6 +139,7 @@
 		total_ram = (uint64_t)(ASSUME_RAM) * 1024 * 1024;
 
 	// Set the defaults.
 	hardware_memlimit_set(0, true, true, false);
+	hardware_memlimit_set(90, true, false, true);
 	return;
 }
